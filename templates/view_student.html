{% extends "base.html" %}

{% block title %}Student Details - R.E.A.C.H{% endblock %}

{% block content %}
<div style="margin-bottom: 1.5rem;">
    <a href="{{ url_for('teacher_dashboard') }}" class="btn" style="background: var(--background); color: var(--text-primary); border: 2px solid var(--border);">
        ‚Üê Back to Dashboard
    </a>
</div>

<div class="card">
    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
        <h2 style="margin: 0;">Student Details</h2>
        <a href="{{ url_for('edit_student', student_id=student.id) }}" class="btn btn-primary">Edit Student</a>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
        <div>
            <h3 style="margin-bottom: 1rem; color: var(--text-primary); border-bottom: 2px solid var(--border); padding-bottom: 0.5rem;">Personal Information</h3>
            <p><strong>Full Name:</strong> {{ student.full_name() }}</p>
            <p><strong>First Name:</strong> {{ student.first_name }}</p>
            {% if student.middle_name %}
            <p><strong>Middle Name:</strong> {{ student.middle_name }}</p>
            {% endif %}
            <p><strong>Last Name:</strong> {{ student.last_name }}</p>
            <p><strong>Grade:</strong> {{ student.grade }}</p>
            <p><strong>Section:</strong> {{ student.section }}</p>
        </div>
        
        <div>
            <h3 style="margin-bottom: 1rem; color: var(--text-primary); border-bottom: 2px solid var(--border); padding-bottom: 0.5rem;">Emergency Contact Information</h3>
            <p><strong>Emergency Contact Name:</strong> {{ student.emergency_contact_name or 'Not provided' }}</p>
            <p><strong>Emergency Contact Number:</strong> {{ student.emergency_contact or 'Not provided' }}</p>
        </div>
        
        <div>
            <h3 style="margin-bottom: 1rem; color: var(--text-primary); border-bottom: 2px solid var(--border); padding-bottom: 0.5rem;">Account Information</h3>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Account Created:</strong> {{ user.created_at.strftime('%B %d, %Y at %I:%M %p') }}</p>
            <p><strong>User Type:</strong> {{ user.user_type|title }}</p>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">Student Consultations</div>
    {% if consultations %}
    <ul class="consultation-list">
        {% for consultation in consultations %}
        <a href="{{ url_for('view_consultation', consultation_id=consultation.id) }}" style="text-decoration: none; color: inherit;">
            <li class="consultation-item {{ consultation.status }}">
                <div class="consultation-header">
                    <div class="consultation-subject">{{ consultation.subject }}</div>
                    <span class="consultation-status status-{{ consultation.status }}">
                        {{ consultation.status }}
                    </span>
                </div>
                <div class="consultation-meta">
                    <span>üìÖ {{ consultation.created_at.strftime('%B %d, %Y at %I:%M %p') }}</span>
                </div>
            </li>
        </a>
        {% endfor %}
    </ul>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">üí¨</div>
        <p>No consultations yet.</p>
    </div>
    {% endif %}
</div>
{% endblock %}

